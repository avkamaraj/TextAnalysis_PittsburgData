
  <!DOCTYPE html><meta charset=UTF-8>
  <style>.node rect{cursor:pointer;fill:#fff;fill-opacity:.5;stroke:#3182bd;stroke-width:1.5px;}
  .node text{font:10px sans-serif;pointer-events:none;}
  path.link{fill:none;stroke:#9ecae1;stroke-width:1.5px;}
  .control.glyphicon{position:static;color:#4A4C4F;font-family:"Oxygen", sans-serif;cursor:pointer;}
  .scrollbox{height: 120px;border: 1px solid #e5e5e5;overflow: scroll;}
  .bar{fill: steelblue;}.axis{font: 10px sans-serif;}.axis path,.axis line{fill: none; stroke: #000;
  shape-rendering: crispEdges;}.x.axis path{display: none;}</style>
  <link href="https://fonts.googleapis.com/css?family=Oxygen" rel=stylesheet type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel=stylesheet>
  <title>STM Visualization</title><body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script>var margin={top:30,right:20,bottom:30,left:20},width=window.innerWidth/1.5-margin.left-margin.right,height=window.innerHeight-margin.top-margin.bottom,barHeight=20,barWidth=width*.8;
  var i=0,duration=400,root;var tree=d3.layout.tree().nodeSize([0,20]);var diagonal=d3.svg.diagonal().projection(function(d){return[d.y,d.x];});
  var svg=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");
  root= {"children":[{"name":["driver, human, drive, distract, around, far, hit"],"size":[1800],"topic_no":[4],"thought_1":["As someone who has been hit by a car 3 times and ran off the rod or nearly hit countless times by cars, all with human drivers; I am all for undos reacted, non-vengeful, non-intoxicatable AVs with their 360 degree vision. I was recently hit by a bus while walking in a crosswalk with the crosswalk sign. By a bus pulling a \"Pittsburgh left\". AV busses can't get here soon enough. Once had a bus driver eating out of a full size bag of chips and using a salt shaker at stop lights. So... bring on the robots. <br />And as a driver myself, I see constant daily dangerous situations brought on by negligent oblivious drivers. <br />Let's do this shit."],"thought_2":["AVs are much safer than human drivers. The more AVs are on the road, the safer they are for bikers, pedestrians and other drivers."],"prob":["driver, car, human, safer, drive, pedestrian, will"],"frex":["driver, human, drive, distract, around, far, hit"],"lift":["alway, close, cross, decreas, distract, far, ive"],"score":["driver, human, drive, monitor, distract, phone, hit"],"proportion":["0.26"]},{"name":["need, pgh, bike, citi, pittsburgh, can, public"],"children":[{"name":["public, oppos, advoc, data, posit, experi, live"],"size":[1800],"topic_no":[2],"thought_1":["I feel that this is the future and we need to work to get along, even with non-humans. If we work together in the start then more positive result follow. To go head in anti anything new or advanced than what do we have to gain? As we age we are less open minded and open to new things. Lets reverse that and embrace the future and work side by side. Maybe they can put a bike rack on the back someday."],"thought_2":["At this point, the technology is new enough (and not ubiquitous), so I think time will tell whether AVs are mostly good or mostly bad. They certainly have the potential to be either, so particularly if it becomes evident (and to some extent, it is becoming evident) that they're here to stay, I would think it would be in BikePGH's best interests to advocate for AVs that are safe, energy efficient, regulated, report relevant data to the public (or at least to pertinent parties), etc."],"prob":["can, public, need, work, safe, oppos, advoc"],"frex":["public, oppos, advoc, data, posit, experi, live"],"lift":["anyon, easier, effort, engag, experi, fight, invest"],"score":["next, data, advoc, oppos, public, work, interest"],"proportion":["0.16"]},{"name":["bike, just, lane, focus, group, citi, transport"],"size":[1800],"topic_no":[6],"thought_1":["Bike Pgh should concern themselves more with educating their own biking community on how to follow traffic laws.  Most bikers do not follow the traffic laws that are established and weave in and out of traffic, do not stop for red lights or stop signs and rarely stay within the boundaries that they have been given special access for.  I love to ride but I also follow the rules of bicycling.  Now it appears the biking community wants to govern AV do your self a favor and govern and spend your time and money educating the biking community."],"thought_2":["bike pgh should focus more on the proposed bike lanes and adding more flexibility to ride throughout the city"],"prob":["bike, citi, pittsburgh, pgh, bicyclist, transport, need"],"frex":["bike, just, lane, focus, group, citi, transport"],"lift":["infrastructur, money, polit, realiti, bike, area, first"],"score":["bike, practic, pgh, transport, citi, part, infrastructur"],"proportion":["0.16"]}],"topic_no":[2,6]},{"name":["vehicl, hand, import, seem, dont, problem, oper"],"size":[1800],"topic_no":[1],"thought_1":["Self-driving cars are a nuisance and a waste. Their existence puts more cars on the road at any given time and consequently consumes more gas. Self-driving cars represent a lazy and non-environmental approach to the suddenly present problem of \"safety\" surrounding vehicles on the road. By their sheer power, motor vehicles in general are NOT safe, and the further you remove users from their connection with the vehicle, the less safe all the circumstances become. For instance, the move from manual transmission vehicles to automatic transmission freed up a hand to do other dangerous and distracting tasks while driving instead of using that hand to shift gears. These conveniences furthermore deprive users of a necessary understanding of the machine they are operating. For example, during the Toyota recall of the \"sticky accelerator,\" a man drove his family off a cliff because he didn't know to put the car in neutral. Self-driving cars will make us all even less aware of the machine's internal processes and how to deal with problems that may occur; to achieve our desire for safety, we must instead develop vehicles that reinforce our knowledge of their operation and our physical connection to their functions. <br /><br />In addition, automation has a history of removing people from the picture and subsequently removing them from employment. Automation is NOT good for the economy in the long-term--only for short-term gains by a select few tech companies. <br /><br />I see absolutely no reason why BikePGH should support the development of self-driving vehicles."],"thought_2":["The jury and data are still out on how these vehicles will operate and if they can safely operate with pedestrians and cyclists. I would say that bike Pittsburgh should support the ongoing research and data collection. But currently coming out in favor or against these vehicles seems too soon. That is based on my opinion with limited knowledge of the current research that exists."],"prob":["vehicl, street, dont, autonom, take, seem, oper"],"frex":["vehicl, hand, import, seem, dont, problem, oper"],"lift":["collect, hand, motor, replac, tell, track, wait"],"score":["vehicl, tell, dont, autonom, oper, street, seem"],"proportion":["0.11"]},{"name":["think, cyclist, make, safeti, test, will, bikepgh"],"children":[{"name":["issu, develop, test, safeti, turn, reduc, continu"],"size":[1800],"topic_no":[3],"thought_1":["This technology has the potential to make the streets so much safer in the long term, and I see the current risk with testing as relatively low.  Let's do what we can to get these cars on the streets and make our streets safer without hindering progress. I support sensible regulations that are developed with the community and with the companies/researchers that allow for testing  AVs in tricky situations under supervision. Regulations should not prohibit testing in various situations, they instead should require companies to share data about their performance/record and safety protocols to demonstrate that they are following necessary precautions before testing on the streets. For example, require some high threshold of accuracy in simulations before testing the vehicle on the road and for each software release. Require a human operator override mechanism during testing (until some threshold is met - not forever and ever). I think the companies developing these technologies have a lot to lose from bad press and a reputation about safety, and regulations should primarily be in place to keep Joe Schmoe from trying his at-home developed car automation kit on the streets without taking any safety precautions."],"thought_2":["If done correctly, AVs have the potential to reduce pedestrian and cyclist injuries/fatalities. However, during the testing phase they may increase. Therefore I would take a neutral stance."],"prob":["safeti, test, issu, develop, pedestrian, regul, potenti"],"frex":["issu, develop, test, safeti, turn, reduc, continu"],"lift":["allow, ask, avoid, cours, develop, failur, input"],"score":["turn, test, safeti, develop, issu, regul, reduc"],"proportion":["0.13"]},{"name":["sure, involv, think, everyon, happen, make, might"],"size":[1800],"topic_no":[5],"thought_1":["AVs have the opportunity to increase safety for cyclists, if done correctly. I think BikePGH should stay actively involved to be sure cyclists are being considered in practical and helpful ways- also to accurately communicate what is happening to the cycling community."],"thought_2":["I think the progress of AV will happen anyway, so it's best if we get involved to ensure safety and harmony between organizations."],"prob":["think, will, make, bikepgh, cyclist, support, safer"],"frex":["sure, involv, think, everyon, happen, make, might"],"lift":["everyon, determin, differ, goal, happen, might, opportun"],"score":["think, bikepgh, will, protect, cyclist, make, sure"],"proportion":["0.17"]}],"topic_no":[3,5]}],"topic_no":[4,2,6,1,3,5],"name":["STM Model"],"this_root":[true],"summary":["A topic model with 6 topics, 458 documents and a 448 word dictionary."],"proportions":[0.1149,0.1614,0.1329,0.2576,0.1724,0.1607]}
 
 root.x0=0;root.y0=0;update(root);function update(source){var nodes=tree.nodes(root);var height=Math.max(500,nodes.length*barHeight+margin.top+margin.bottom);
  d3.select("svg").transition().duration(duration).attr("height",height);d3.select(self.frameElement).transition().duration(duration).style("height",height+"px");nodes.forEach(function(n,i){n.x=i*barHeight;});
  var node=svg.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i);});
  var nodeEnter=node.enter().append("g").attr("class",function(d){if(d.size){return"node leaf"}else{return"node noleaf"}}).attr("transform",function(d){return"translate("+source.y0+","+source.x0+")";}).style("opacity",1e-6);
  nodeEnter.append("rect").data(nodes).attr("y",-barHeight/2).attr("height",barHeight).attr("width",barWidth).style("fill",color).on("click",clickModal);nodeEnter.append("text").attr("dy",3.5).attr("dx",5.5).text(function(d){if (d.children){return d.name;}else{return d.topic_no + ": " + d.name;}});
  d3.selectAll("g.noleaf").append("svg:foreignObject").attr("width",20).attr("height",20).attr("y","-10px").attr("x",barWidth-15).append("xhtml:span").attr("class","control glyphicon glyphicon-minus").attr("width","30").on("click",function(d){click(d);});
  nodeEnter.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1);node.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1).select("rect").style("fill",color);
  node.exit().transition().duration(duration).attr("transform",function(d){return"translate("+source.y+","+source.x+")";}).style("opacity",1e-6).remove();
  var link=svg.selectAll("path.link").data(tree.links(nodes),function(d){return d.target.id;});link.enter().insert("path","g").attr("class","link").attr("d",function(d){var o={x:source.x0,y:source.y0};return diagonal({source:o,target:o});}).transition().duration(duration).attr("d",diagonal);
  link.transition().duration(duration).attr("d",diagonal);link.exit().transition().duration(duration).attr("d",function(d){var o={x:source.x,y:source.y};return diagonal({source:o,target:o});}).remove();nodes.forEach(function(d){d.x0=d.x;d.y0=d.y;});}
  function click(d){if(d.children){d._children=d.children;d.children=null;}else{d.children=d._children;d._children=null;}update(d);}
  function color(d){return d._children?"#3182bd":d.children?"#c6dbef":"#fd8d3c";}
  function clickModal(d){if(d.size){$("#doc1").text(d.thought_1);$("#doc2").text(d.thought_2);$("#high-prob").text("Highest Probability: "+d.prob);$("#topicModalLabel").text("Topic "+d.topic_no+" Information");$("#frex").text("FREX: "+d.frex);$("#lift").text("Lift: "+d.lift);
  $("#score").text("Score: "+d.score);$("#proportion").text(""+d.proportion);$("#modelBody").hide();$("#clusterBody").hide();$("#topicBody").show();$("#topicModal").modal("show");}else if(d.this_root){$("#topicModalLabel").text("Fitted Model Information");$("#mod1-text").text(d.summary);$("#topicBody").hide();
  $("#clusterBody").hide();$("#modelBody").show();$("#topicModal").modal("show");if ($("#barchartDiv").children().length == 2){proportionChart();}}else{$("#topicModalLabel").text("Cluster Information");$("#clust1-text").text("This cluster comprises topics "+d.topic_no.join(", ")+".");$("#topicBody").hide();$("#modelBody").hide();
  $("#clusterBody").show();$("#topicModal").modal("show");}} function proportionChart(){for(var t=window.innerHeight/3.5,a=window.innerWidth/2.5,r=35,e=35,n=root.proportions.length,o=[.5];o.length<n;)o.push(o[o.length]+1);var i=d3.select("#barchartDiv").append("svg").attr({width:a,height:t,style:"display: block; margin: auto;"}),
  l=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([0,t-r]),s=d3.scale.linear().domain([0,n]).range([0,a-e]),d=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([t-r,0]),p=d3.svg.axis().scale(d).orient("left"),c=d3.svg.axis().scale(s).orient("bottom").tickValues(d3.range(.5,n+.5,1));
  i.selectAll("rect").data(root.proportions).enter().append("rect").attr({x:function(t,r){return r*(a-e)/n+e},y:function(a){return t-l(a)-r},width:(a-e)/n-1,height:l,fill:"orange"}),
  i.append("g").attr({"class":"axis",transform:"translate("+e+","+(t-r)+")"}).call(c),i.append("g").attr({"class":"axis",transform:"translate("+e+")"}).call(p),i.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",a/2).attr("y",t-6).text("Topic")}</script>
  <div class="modal fade" id="topicModal" tabindex="-1" role="dialog" aria-labelledby="topicModalLabel" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="topicModalLabel">Topic Information</h4></div>
  <div class="modal-body" id="topicBody"><h5>Top Words</h5><ul id="word-list"><li id="high-prob">Highest Probability: </li><li id="frex">FREX: </li><li id="lift">Lift: </li><li id="score">Score: </li></ul><hr><h5>Representative Documents</h5>
  <div id="doc1" class="modal-body scrollbox"></div>
  <br><div id="doc2" class="modal-body scrollbox"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="modelBody"><h5>Summary</h5><span id="mod1-text"></span><hr><div id="barchartDiv">
  <h5>Topic Proportions in Corpus</h5><br></div><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="clusterBody"><h5>Summary</h5><span id="clust1-text"></span><br><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></body>
